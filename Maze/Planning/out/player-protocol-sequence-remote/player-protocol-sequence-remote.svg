<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="990px" preserveAspectRatio="none" style="width:557px;height:990px;background:#EEEBDC;" version="1.1" viewBox="0 0 557 990" width="557px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="158.186" style="stroke:#000000;stroke-width:1.5;" width="541" x="10" y="101.0679"/><rect fill="none" height="219.6481" style="stroke:#000000;stroke-width:1.5;" width="375.5" x="175.5" y="362.3218"/><rect fill="none" height="164.2361" style="stroke:#000000;stroke-width:1.5;" width="375.5" x="175.5" y="658.6759"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="44" x2="44" y1="84.0679" y2="907.0301"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="214.5" x2="214.5" y1="320.7878" y2="907.0301"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="345" x2="345" y1="224.7199" y2="907.0301"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="517" x2="517" y1="84.0679" y2="907.0301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="20" y="79.9659">Server</text><path d="M26.5,29 C26.5,19 44.5,19 44.5,19 C44.5,19 62.5,19 62.5,29 L62.5,55 C62.5,65 44.5,65 44.5,65 C44.5,65 26.5,65 26.5,55 L26.5,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M26.5,29 C26.5,39 44.5,39 44.5,39 C44.5,39 62.5,39 62.5,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="20" y="920.996">Server</text><path d="M26.5,935.098 C26.5,925.098 44.5,925.098 44.5,925.098 C44.5,925.098 62.5,925.098 62.5,935.098 L62.5,961.098 C62.5,971.098 44.5,971.098 44.5,971.098 C44.5,971.098 26.5,971.098 26.5,961.098 L26.5,935.098 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M26.5,935.098 C26.5,945.098 44.5,945.098 44.5,945.098 C44.5,945.098 62.5,945.098 62.5,935.098 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="185.5" y="920.996">Referee</text><ellipse cx="214.5" cy="933.598" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M214.5,941.598 L214.5,968.598 M201.5,949.598 L227.5,949.598 M214.5,968.598 L201.5,983.598 M214.5,968.598 L227.5,983.598 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="304" y="920.996">PlayerProxy</text><ellipse cx="345.5" cy="933.598" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M345.5,941.598 L345.5,968.598 M332.5,949.598 L358.5,949.598 M345.5,968.598 L332.5,983.598 M345.5,968.598 L358.5,983.598 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="494" y="79.9659">Player</text><ellipse cx="517.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M517.5,21.5 L517.5,48.5 M504.5,29.5 L530.5,29.5 M517.5,48.5 L504.5,63.5 M517.5,48.5 L530.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="494" y="920.996">Player</text><ellipse cx="517.5" cy="933.598" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M517.5,941.598 L517.5,968.598 M504.5,949.598 L530.5,949.598 M517.5,968.598 L504.5,983.598 M517.5,968.598 L530.5,983.598 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><path d="M10,101.0679 L83,101.0679 L83,110.7739 L73,120.7739 L10,120.7739 L10,101.0679 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="158.186" style="stroke:#000000;stroke-width:1.5;" width="541" x="10" y="101.0679"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="25" y="115.9649">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="98" y="114.8268">[For every player]</text><polygon fill="#181818" points="55.5,158.186,45.5,162.186,55.5,166.186,51.5,162.186" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49.5" x2="516.5" y1="162.186" y2="162.186"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="61.5" y="138.6709">Connect to server</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="61.5" y="156.377">over TCP</text><polygon fill="#181818" points="292,243.01,302,247.01,292,251.01,296,247.01" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44.5" x2="298" y1="247.01" y2="247.01"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="51.5" y="188.083">Server creates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="51.5" y="205.789">PlayerProxy  to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="51.5" y="223.495">wrap the TCP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="51.5" y="241.201">stream</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="304" y="245.1519">PlayerProxy</text><ellipse cx="345.5" cy="178.686" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M345.5,186.686 L345.5,213.686 M332.5,194.686 L358.5,194.686 M345.5,213.686 L332.5,228.686 M345.5,213.686 L358.5,228.686 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="173.5,321.3719,183.5,325.3719,173.5,329.3719,177.5,325.3719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44.5" x2="179.5" y1="325.3719" y2="325.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="51.5" y="284.1509">Send PlayerProxies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="51.5" y="301.8569">to  referee to start</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="51.5" y="319.5629">game</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="185.5" y="341.2198">Referee</text><ellipse cx="214.5" cy="274.7539" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M214.5,282.7539 L214.5,309.7539 M201.5,290.7539 L227.5,290.7539 M214.5,309.7539 L201.5,324.7539 M214.5,309.7539 L227.5,324.7539 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><path d="M175.5,362.3218 L248.5,362.3218 L248.5,372.0278 L238.5,382.0278 L175.5,382.0278 L175.5,362.3218 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="219.6481" style="stroke:#000000;stroke-width:1.5;" width="375.5" x="175.5" y="362.3218"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="190.5" y="377.2188">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="263.5" y="376.0807">[For every Player]</text><polygon fill="#181818" points="333.5,419.4398,343.5,423.4398,333.5,427.4398,337.5,423.4398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="214.5" x2="339.5" y1="423.4398" y2="423.4398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="221.5" y="399.9248">Call</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="221.5" y="417.6308">propose_board0()</text><polygon fill="#181818" points="505.5,468.8519,515.5,472.8519,505.5,476.8519,509.5,472.8519" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="345.5" x2="511.5" y1="472.8519" y2="472.8519"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="352.5" y="449.3369">Send</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="352.5" y="467.0429">ProposeBoardJsonStruct</text><polygon fill="#181818" points="356.5,500.5579,346.5,504.5579,356.5,508.5579,352.5,504.5579" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="350.5" x2="516.5" y1="504.5579" y2="504.5579"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="362.5" y="498.7489">Send JsonBoard</text><path d="M251,517.5579 L251,544.5579 L440,544.5579 L440,527.5579 L430,517.5579 L251,517.5579 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M430,517.5579 L430,527.5579 L440,527.5579 L430,517.5579 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="257" y="536.4549">Convert JsonBoard to Board</text><polygon fill="#181818" points="225.5,569.9699,215.5,573.9699,225.5,577.9699,221.5,573.9699" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="219.5" x2="344.5" y1="573.9699" y2="573.9699"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="231.5" y="568.1609">Relay Board</text><path d="M135,593.9699 L135,620.9699 L294,620.9699 L294,603.9699 L284,593.9699 L135,593.9699 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M284,593.9699 L284,603.9699 L294,603.9699 L284,593.9699 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="141" y="612.8669">Referee launches game</text><path d="M175.5,658.6759 L248.5,658.6759 L248.5,668.382 L238.5,678.382 L175.5,678.382 L175.5,658.6759 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="164.2361" style="stroke:#000000;stroke-width:1.5;" width="375.5" x="175.5" y="658.6759"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="190.5" y="673.573">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="263.5" y="672.4349">[For every Player]</text><polygon fill="#181818" points="333.5,698.088,343.5,702.088,333.5,706.088,337.5,702.088" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="214.5" x2="339.5" y1="702.088" y2="702.088"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="221.5" y="696.279">Call player_won()</text><polygon fill="#181818" points="505.5,747.5,515.5,751.5,505.5,755.5,509.5,751.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="345.5" x2="511.5" y1="751.5" y2="751.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="352.5" y="727.985">Send</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="352.5" y="745.691">PlayerWonJsonStruct</text><polygon fill="#181818" points="356.5,779.206,346.5,783.206,356.5,787.206,352.5,783.206" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="350.5" x2="516.5" y1="783.206" y2="783.206"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="362.5" y="777.397">Send ACK</text><polygon fill="#181818" points="225.5,810.912,215.5,814.912,225.5,818.912,221.5,814.912" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="219.5" x2="344.5" y1="814.912" y2="814.912"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="231.5" y="809.103">Relay ACK</text><polygon fill="#181818" points="55.5,885.0301,45.5,889.0301,55.5,893.0301,51.5,889.0301" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49.5" x2="213.5" y1="889.0301" y2="889.0301"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="61.5" y="847.8091">Return list of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="61.5" y="865.5151">Winners, Losers,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="61.5" y="883.2211">and Cheaters</text><!--MD5=[c53a18d30ff50066045ea5e9c72879bf]
@startuml
    skinparam backgroundColor #EEEBDC
    skinparam handwritten false
    skinparam maxMessageSize 120
    database Server
    actor Referee
    actor PlayerProxy
    actor Player
    loop For every player
    Player -> Server: Connect to server over TCP

    Server -> PlayerProxy ** : Server creates PlayerProxy  to wrap the TCP stream
    end
    Server -> Referee **: Send PlayerProxies to  referee to start game
    loop For every Player
    Referee -> PlayerProxy: Call propose_board0()
    PlayerProxy -> Player: Send ProposeBoardJsonStruct
    Player -> PlayerProxy: Send JsonBoard
    note over PlayerProxy: Convert JsonBoard to Board
    PlayerProxy -> Referee: Relay Board
    end
    Note over Referee: Referee launches game
    |||
    
    loop For every Player
    Referee -> PlayerProxy: Call player_won()
    PlayerProxy -> Player: Send PlayerWonJsonStruct
    Player -> PlayerProxy: Send ACK
    PlayerProxy -> Referee: Relay ACK
    end

    Referee -> Server: Return list of Winners, Losers, and Cheaters
@enduml

PlantUML version 1.2022.7(Mon Aug 22 13:01:30 EDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>